<!DOCTYPE html>
<html lang="jp">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <!--   コード色付け-->
    <link rel="stylesheet" href="css/rainbow.css">
    <script src="js/highlight.pack.js"></script>
    <!--   コード色付け-->
</head>

<body>
    <div class="wrapper">
        <header>
            <h1><a href="index.html"><img src="img/toplogo.png" alt="ポートフォリオへようこそ！"></a></h1>
        </header>
        <nav>
            <ul>
                <li><a href="index.html">はじめに</a></li>
                <li><a href="vision.html">ビジョン</a></li>
                <li><a href="db.html">DB</a></li>
                <li><a href="function.html">機能</a></li>
                <li><a href="diary.html">日誌</a></li>
                <li><a href="loadmap.html">これから</a></li>
            </ul>
        </nav>
        <main>
            <div class="hazimeni">
                <ul>
                    <li><a href="read.html">読み込み</a></li>
                    <li><a href="create.html">書き込み</a></li>
                    <li><a href="update.html">更新</a></li>
                    <li><a href="delete.html">削除</a></li>
                </ul>
                <h2>読み込み機能</h2>
                <p>追加した機能をコードと共に説明していきます<br></p>
                <!-- functionブロックテンプレート -->
                <div class="function-box">
                    <!-- ブロックテンプレート -->
                    <div class="box">
                        <div class="box-image">
                            <img src="" alt="画像">
                        </div>
                        <div class="box-code">
                            <pre>
                <code>
                  <h3>title</h3>
               <!-- &lt; -->
               <!-- &lt; -->
                </code>
                </pre>
                        </div>
                        <div class="box-comment">
                            <p>コメント</p>
                        </div>
                    </div>
                    <!-- ブロックテンプレート -->
                </div>
                <!-- functionブロックテンプレート -->
                <div class="function-box">
                    <div class="box">
                        <div class="box-image">
                            <img src="img/index.png" alt="画像">
                        </div>
                        <div class="box-code">
                            <pre>
                <code>
            <h3>index.jsp</h3>
           &lt;%@ page language="java" contentType="text/html; charset=UTF-8"
           pageEncoding="UTF-8"%>
           &lt;!DOCTYPE html>
           &lt;html>
           &lt;head>
           &lt;meta charset="UTF-8">
           &lt;title>Insert title here&lt;/title>
           &lt;/head>
           &lt;body>
           index
           &lt;form action="/matsuhama/WelcomServlet" method="POST">
           &lt;input type="submit" value="click me">
           &lt;/form>
           &lt;/body>
           &lt;/html>
                </code>
                </pre>
                        </div>
                        <div class="box-comment">
                            <p>最初に表示されるトップページです<br>コントローラであるWelcomServletへ遷移します</p>
                        </div>
                    </div>
                    <div class="box-code">
                        <pre>
              <code>
                <h3>WelcomServlet.java</h3>
                package servlet;

                import java.io.IOException;
                import java.util.ArrayList;
                import java.util.List;
                
                import javax.servlet.RequestDispatcher;
                import javax.servlet.ServletException;
                import javax.servlet.annotation.WebServlet;
                import javax.servlet.http.HttpServlet;
                import javax.servlet.http.HttpServletRequest;
                import javax.servlet.http.HttpServletResponse;
                import javax.servlet.http.HttpSession;
                
                import dao.SnowDAO2;
                import model.SnowBean;
                
                @WebServlet("/WelcomServlet")
                public class WelcomServlet extends HttpServlet {
                  private static final long serialVersionUID = 1L;
                
                  protected void doGet(HttpServletRequest request, HttpServletResponse response)
                      throws ServletException, IOException {
                
                    RequestDispatcher dispatcher = request.getRequestDispatcher("/WEB-INF/jsp/snowWrite.jsp");
                    dispatcher.forward(request, response);
                  }
                
                  protected void doPost(HttpServletRequest request, HttpServletResponse response)
                      throws ServletException, IOException {
                    List&lt;SnowBean> list = new ArrayList&lt;>();
                    SnowDAO2 snowDAO2 = new SnowDAO2();
                    list = snowDAO2.findAll();
                    HttpSession session = request.getSession();
                    session.setAttribute("list", list);
                
                    RequestDispatcher dispatcher = request.getRequestDispatcher("/WEB-INF/jsp/snow.jsp");
                    dispatcher.forward(request, response);
                
                  }
                
                }
                
              </code>
              </pre>
                    </div>
                    <div class="box-comment">
                        <p>POST送信をキャッチしてDBに最新情報を問い合わせセッションに保存、snow.jspに遷移します</p>
                    </div>
                    <!-- ブロックテンプレート -->
                    <div class="box">
                        <div class="box-image">
                            <img src="img/write_1.png" alt="画像">
                        </div>
                        <div class="box-code">
                            <pre>
                <code>
                  <h3>snow.jsp</h3>
              &lt;%@ page language="java" contentType="text/html; charset=UTF-8"
              pageEncoding="UTF-8"%>
              &lt;%@ page import="java.util.List,model.SnowBean" %>
              
              &lt;%
              List&lt;SnowBean> list = (List&lt;SnowBean>)session.getAttribute("list");
              %>
              &lt;!DOCTYPE html>
              &lt;html>
              &lt;head>
              &lt;meta charset="UTF-8">
              &lt;title>Insert title here&lt;/title>
              &lt;/head>
              &lt;body>
              snow
              &lt;a href="/matsuhama/WelcomServlet">書き込む&lt;/a>&lt;br>
              &lt;form action="/matsuhama/SnowUpdateControll" method="POST">
              &lt;input type="submit" value="削除/変更する">
              &lt;table>
              &lt;% for(int i = 0;i &lt; list.size();i++) { %>
              &lt;tr>
              &lt;th>
              &lt;input type="radio" name="alterId" value="&lt;%= i + 1 %>">
              &lt;%= i + 1 %>&lt;/th>
              &lt;td>&lt;%= list.get(i).getName() %>&lt;/td>
              &lt;td>&lt;%= list.get(i).getText() %>&lt;/td>
              &lt;td>&lt;%= list.get(i).getCreated() %>&lt;/td>
              &lt;td>&lt;%= list.get(i).getType() %>&lt;/td>
              &lt;td>&lt;%= list.get(i).getDiscription() %>&lt;/td>
              &lt;/tr>
              &lt;% } %>
              &lt;/table>
              &lt;/form>
              &lt;/body>
              &lt;/html>
                </code>
                </pre>
                        </div>
                        <div class="box-comment">
                            <p>先ほど保存したセッションから最新情報を取得し表示します ここがこのアプリのメインページです</p>
                        </div>
                    </div>
                    <!-- ブロックテンプレート -->
                </div>

            </div>



    </div>
    <div class="foot">
        <p><a href="create.html">進む</a></p>
    </div>
    </main>
    <footer>
        <p>&copy;Copyright A-tomato corp. All rights reserved.</p>

    </footer>
    </div>
    <!--   コード色付け-->
    <script>
        hljs.highlightAll();

    </script>
    <!--   コード色付け-->
</body>

</html>
